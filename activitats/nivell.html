<!DOCTYPE html>
<html lang="cat">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tria un nivell - Afers Juvenils</title>
  <link rel="icon" type="image/png" href="../images/icon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <div class="text-2xl font-bold text-primary">Afers Juvenils</div>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="../index.html" class="nav-link text-gray-800 hover:text-gray-600 font-medium">Inici</a>
                    <a href="../entrevistes.html" class="nav-link text-gray-800 hover:text-gray-600 font-medium">Entrevistes</a>
                    <a href="../guia.html" class="nav-link text-gray-800 hover:text-gray-600 font-medium">Guia Didàctica</a>
                    <a href="../activitats.html" class="nav-link text-gray-800 hover:text-gray-600 font-medium active">Activitats</a>
                    <a href="../tastet.html" class="nav-link text-gray-800 hover:text-gray-600 font-medium">Un Tastet</a>
                    <a href="../autora.html" class="nav-link text-gray-800 hover:text-gray-600 font-medium">L'Autora</a>
                </nav>
                <div class="md:hidden">
                    <button id="menu-toggle" class="text-gray-800 focus:outline-none"><i class="fas fa-bars text-xl"></i></button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg">
            <div class="px-4 py-3 space-y-3">
                <a href="../index.html" class="block text-gray-800 hover:text-gray-600 font-medium">Inici</a>
                <a href="../entrevistes.html" class="block text-gray-800 hover:text-gray-600 font-medium">Entrevistes</a>
                <a href="../guia.html" class="block text-gray-800 hover:text-gray-600 font-medium">Guia Didàctica</a>
                <a href="../activitats.html" class="block text-gray-800 hover:text-gray-600 font-medium">Activitats</a>
                <a href="../tastet.html" class="block text-gray-800 hover:text-gray-600 font-medium">Un Tastet</a>
                <a href="../autora.html" class="block text-gray-800 hover:text-gray-600 font-medium">L'Autora</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div id="level-selection" class="mb-12">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                <a href="../activitats.html" class="flex items-center text-primary font-medium hover:text-accent transition">
                    <i class="fas fa-arrow-left mr-2"></i> Tornar als relats
                </a>
                <h2 id="selected-story-title" class="text-2xl font-bold text-primary text-left sm:text-right">Carregant...</h2>
            </div>
            
            <p id="selected-story-desc" class="text-gray-700 mb-8"></p>
            
            <h3 class="text-xl font-bold mb-4 text-primary">Tria un nivell</h3>
            <div id="level-buttons-container" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- ELS BOTONS DE NIVELL ES GENERARAN AQUÍ AMB JAVASCRIPT -->
                <div class="p-6 rounded-lg shadow-md bg-gray-50 animate-pulse"><div class="flex justify-between items-center mb-4"><div class="h-6 bg-gray-300 rounded w-1/3"></div><div class="h-5 bg-gray-300 rounded w-1/4"></div></div><div class="space-y-2"><div class="h-4 bg-gray-300 rounded"></div><div class="h-4 bg-gray-300 rounded w-5/6"></div></div></div>
                <div class="p-6 rounded-lg shadow-md bg-gray-50 animate-pulse"><div class="flex justify-between items-center mb-4"><div class="h-6 bg-gray-300 rounded w-1/3"></div><div class="h-5 bg-gray-300 rounded w-1/4"></div></div><div class="space-y-2"><div class="h-4 bg-gray-300 rounded"></div><div class="h-4 bg-gray-300 rounded w-5/6"></div></div></div>
                <div class="p-6 rounded-lg shadow-md bg-gray-50 animate-pulse"><div class="flex justify-between items-center mb-4"><div class="h-6 bg-gray-300 rounded w-1/3"></div><div class="h-5 bg-gray-300 rounded w-1/4"></div></div><div class="space-y-2"><div class="h-4 bg-gray-300 rounded"></div><div class="h-4 bg-gray-300 rounded w-5/6"></div></div></div>
            </div>
        </div>
    </main>

    <footer class="bg-primary text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <div class="text-2xl font-bold text-secondary mb-2">Afers Juvenils</div>
                    <p class="text-gray-400">© 2025 Maria Dolors Añón. Tots els drets reservats.</p>
                </div>
                <div class="flex space-x-6">
                    <a href="https://www.instagram.com/anondolors" target="_blank" class="text-gray-400 hover:text-accent"><i class="fab fa-instagram text-xl"></i></a>
                    <a href="https://www.facebook.com/dolors.anon" target="_blank" class="text-gray-400 hover:text-accent"><i class="fab fa-facebook text-xl"></i></a>
                    <a href="mailto:info@afersjuvenils.cat" class="text-gray-400 hover:text-accent"><i class="fas fa-envelope text-xl"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        if (menuToggle && mobileMenu) {
            menuToggle.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        }

        const STORY_DATA = {
            'nouvinguda': { title: 'La nouvinguda', description: "Un relat sobre integració, assetjament i la cerca de la pròpia identitat." },
            'graduacio': { title: 'La graduació', description: "Un moment de transició i reflexió sobre les expectatives i la realitat." },
            'joves-promeses': { title: 'Joves promeses', description: "L'amistat, la creativitat i la lluita per un somni en el món del teatre." },
            'una-altra-ronda': { title: 'Una altra ronda?', description: "Les conseqüències d'una nit de festa i les decisions equivocades." },
            'que-declarare': { title: 'Què declararé?', description: "Un drama familiar intens sobre la culpa i les decisions desesperades." },
            'iaia-youtuber': { title: 'Iaia, jo vull ser youtuber', description: "Una història sobre somnis, tecnologia i vincles intergeneracionals." },
            'mirall-singular': { title: 'Un mirall singular', description: "L'autoestima i la percepció d'un mateix a través d'un regal misteriós." },
            'jocs-perillosos': { title: 'Jocs perillosos', description: "Quan la frontera entre el món virtual i la realitat es desdibuixa." },
            'futur-hipotecat': { title: 'Un futur hipotecat', description: "Les conseqüències irreversibles de l'abús de substàncies a l'adolescència." },
            'estima-mare': { title: 'De tant que t\'estima la mare...', description: "Una exploració de l'amor sobreprotector i la necessitat de trobar la pròpia veu." },
            'paradisos-xarxa': { title: 'Paradisos a la xarxa', description: "Les aparences a les xarxes socials amaguen realitats molt més complexes." },
            'fugitiva': { title: 'Fugitiva', description: "La fugida d'una adolescent i la desesperació d'una família que la busca." }
        };

        const ACTIVE_LINKS = {
            'nouvinguda': ['principiant', 'mitja', 'avancat'],
            'graduacio': ['principiant', 'mitja', 'avancat'],
            'joves-promeses': ['principiant', 'mitja', 'avancat'],
            'una-altra-ronda': ['principiant', 'mitja', 'avancat'],
            'que-declarare': ['principiant', 'mitja', 'avancat'], 
            'iaia-youtuber': ['principiant', 'mitja', 'avancat'], 
            'mirall-singular': [], 
            'jocs-perillosos': [],
            'futur-hipotecat': [], 
            'estima-mare': [], 
            'paradisos-xarxa': [], 
            'fugitiva': []
        };

        const levelButtonsContainer = document.getElementById('level-buttons-container');
        const storyTitleEl = document.getElementById('selected-story-title');
        const storyDescEl = document.getElementById('selected-story-desc');
        
        const urlParams = new URLSearchParams(window.location.search);
        const storyId = urlParams.get('relat');

        function generateLevelButtons(storyId) {
            levelButtonsContainer.innerHTML = '';
            const levels = [
                { id: 'principiant', name: 'Principiant', stars: 1, desc: "Activitats bàsiques de vocabulari i comprensió lectora." },
                { id: 'mitja', name: 'Mitjà', stars: 2, desc: "Exercicis de gramàtica, comprensió i expressió escrita." },
                { id: 'avancat', name: 'Avançat', stars: 3, desc: "Activitats complexes d'anàlisi literària i reflexió crítica." }
            ];
            
            const availableLevels = ACTIVE_LINKS[storyId] || [];

            levels.forEach(level => {
                const isAvailable = availableLevels.includes(level.id);
                const href = isAvailable ? `${storyId}/${level.id}.html` : '#';
                const cursorClass = isAvailable ? 'cursor-pointer' : 'cursor-not-allowed';
                const hoverClass = isAvailable ? 'hover:border-accent' : '';
                const disabledClasses = !isAvailable ? 'opacity-50 bg-gray-100' : 'bg-white';
                const icon = isAvailable ? '<i class="fas fa-chevron-right text-accent"></i>' : '<span class="text-xs font-semibold text-gray-500">Properament</span>';

                const starsHtml = Array(3).fill(0).map((_, i) => 
                    `<i class="fas fa-star ${i < level.stars ? 'text-accent' : 'text-gray-300'}"></i>`
                ).join('');

                const buttonHtml = `<a href="${href}" class="level-btn block p-6 rounded-lg shadow-md border-2 border-transparent ${cursorClass} ${hoverClass} ${disabledClasses} transition-all">
                    <div class="flex justify-between items-center mb-4"><h4 class="font-bold text-lg text-primary">${level.name}</h4><div class="flex">${starsHtml}</div></div>
                    <p class="text-gray-600 mb-4">${level.desc}</p>
                    <div class="flex justify-end items-center">${icon}</div>
                </a>`;
                levelButtonsContainer.innerHTML += buttonHtml;
            });
        }

        if (storyId && STORY_DATA[storyId]) {
            const story = STORY_DATA[storyId];
            storyTitleEl.textContent = story.title;
            storyDescEl.textContent = story.description;
            document.title = `${story.title} - Tria un nivell`;
            generateLevelButtons(storyId);
        } else {
            storyTitleEl.textContent = 'Relat no trobat';
            storyDescEl.textContent = 'Torna a la pàgina d\'activitats i selecciona un relat vàlid.';
        }
    });
    </script>
</body>
</html>